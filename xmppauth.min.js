"use strict";angular.module("angular-xmppauth",[]).factory("XmppAuth",[function(){var connection=new Strophe.Connection("http://localhost:5280/http-bind");return{auth:function(login,password){connection.connect(login,password,function(status){status==Strophe.Status.CONNECTING?console.log("Strophe is connecting"):status==Strophe.Status.CONNFAIL?console.log("Strophe failed to connect"):status==Strophe.Status.DISCONNECTING?console.log("Strophe disconnected"):status==Strophe.Status.DISCONNECTED?console.log("Strophe is disconnected"):status==Strophe.Status.CONNECTED&&(console.log("Strophe Connected"),connection.send($pres().tree()))})},sendMessage:function(userid,text_message){if(text_message.length>0){var connect_jid="user2@localhost",timestamp=(new Date).getTime(),to_jid=Strophe.getBareJidFromJid(connect_jid),message=$msg({from:userid,to:to_jid,id:timestamp}).c("body").t(text_message).up().c("active",{xmlns:"http://jabber.org/protocol/chatstates"});connection.send(message)}},connection:connection}}]);